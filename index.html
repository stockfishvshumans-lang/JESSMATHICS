<!DOCTYPE html>

<html lang="en">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>JESSMATH: ELITE DEFENSE</title>

    

    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@500;700;900&display=swap" rel="stylesheet">

    

    <script src="/socket.io/socket.io.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    

    <link rel="stylesheet" href="style.css">

</head>

<body>





    <canvas id="bgCanvas" style="position:fixed; top:0; left:0; width:100vw; height:100vh; z-index:-10;"></canvas>

    ```







    



    <div id="boot-overlay" style="position:fixed; top:0; left:0; width:100%; height:100%; background:#000; z-index:1000000; display:flex; justify-content:center; align-items:center; flex-direction:column; cursor:pointer;" onclick="window.startSystem()">

    <h1 class="blink" style="font-family:'Orbitron'; color:#00e5ff; font-size:24px; letter-spacing:5px;">SYSTEM STANDBY</h1>

    <p style="font-family:'Rajdhani'; color:#fff; margin-top:10px;">[ CLICK ANYWHERE TO INITIALIZE ]</p>

    </div>



    <div id="cinematic-intro">

        <div class="space-bg"></div>

        <div class="stars-1"></div>

        <div class="stars-2"></div>

        <div class="nebula-layer"></div>

        

        <div id="war-container"></div> 

        

        <div class="intro-ui">

            <div class="logo-wrapper">

                <h1 class="defender-logo" data-text="MATH DEFENDER">MATH DEFENDER</h1>

                <div class="logo-scanline"></div>

            </div>

            <div class="subtitle-text">HUMANITY'S LAST STAND</div>

            

            <div class="loading-system">

                <div class="tech-bar">

                    <div class="tech-fill"></div>

                </div>

                <div class="loading-status">ESTABLISHING UPLINK...</div>

            </div>

        </div>

        

        <div class="screen-flash"></div>

        <div class="vignette-overlay"></div>

    </div>



    <div id="story-overlay" class="hidden">

        <div class="scanline-bg"></div>

        

        <div class="comm-panel">

            <div class="comm-header">

                <span class="blink">‚óè LIVE FEED</span>

                <span>SECURE CHANNEL: ALPHA-1</span>

            </div>

            

            <div class="comm-content">

                <div class="avatar-box">

                    <div class="sound-wave">

                        <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>

                    </div>

                    <div class="commander-label">CMDR. VECTOR</div>

                </div>



                <div class="dialogue-box">

                    <p id="story-text"></p>

                    <div id="tutorial-visual" class="hidden"></div>

                </div>

            </div>



            <div class="comm-footer">

                <button class="btn text-only" onclick="window.skipStory()">SKIP BRIEFING</button>

                <button class="btn secondary" id="next-story-btn" onclick="window.nextStoryStep()">ACKNOWLEDGE [ENTER]</button>

            </div>

        </div>

    </div>



    <div id="game-wrapper">



        <div id="game-wrapper">

        <div id="vr-grid-bg"></div>

        <div id="panopticon-alert">

            <div class="cyber-eye">üëÅÔ∏è‚Äçüó®Ô∏è</div>

            <div class="alert-text">COMMANDER IS MONITORING YOUR TERMINAL</div>

        </div>



      

        <div id="glitch-overlay" class="hidden"></div>

        <canvas id="gameCanvas"></canvas>



        <div id="ui-layer">

            <div id="start-countdown" class="hidden" style="position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); font-family:'Orbitron'; font-size:150px; color:#00e5ff; text-shadow:0 0 50px cyan; z-index:9999; pointer-events:none;">3</div>

            

            <div id="hud-top" class="tactical-visor">

                <div class="visor-panel left-visor">

                    <div class="visor-data">

                        <span class="label">SYS_LEVEL</span>

                        <span id="level-txt" class="value neon-blue">1</span>

                    </div>

                    <div id="xp-bar-container" class="cyber-track">

                        <div id="xp-bar-fill" class="cyber-fill"></div>

                    </div>

                </div>



                <div class="visor-panel center-visor">

                    <span class="label" style="color: #ff0055;">HULL INTEGRITY</span>

                    <span id="health-txt" class="value neon-red" style="font-size: 32px;">100%</span>

                    <div id="boss-warning" class="hidden blink" style="color: #ffd700; font-family: 'Orbitron'; font-size: 14px; letter-spacing: 4px; margin-top: 5px;">‚ö†Ô∏è SECTOR BOSS DETECTED ‚ö†Ô∏è</div>

                </div>



                <div class="visor-panel right-visor">

                    <div class="visor-data">

                        <span class="label">COMBAT SCORE</span>

                        <span id="score-txt" class="value neon-green">0</span>

                    </div>

                    <div class="visor-data">

                        <span class="label">CREDITS</span>

                        <span class="value neon-gold">üí∞ <span id="coins-txt">200</span></span>

                    </div>

                </div>

            </div>



            <div id="boss-hud" class="hidden">

                <span id="boss-name">MOTHERSHIP OMEGA</span>

                <div id="boss-hp-bar"><div id="boss-hp-fill"></div></div>

            </div>



            <div id="side-feed" class="radar-collapsed">

                <div class="radar-handle">

                    <span class="blink" style="color: #ff0055;">‚óè</span> RADAR

                </div>

                <div id="live-leaderboard" class="glass-panel">

                    <h4 style="color: #00e5ff; border-bottom: 1px solid #00e5ff; padding-bottom: 5px;">LIVE AGENT RANKINGS</h4>

                    <ul id="leaderboard-list"></ul>

                </div>

                <div id="battle-feed"></div>

            </div>



            <div id="hud-bottom" class="command-console">

                

                <div class="console-wing">

                    <button class="tactical-btn" onclick="window.toggleMute()" title="Audio System"><span id="mute-btn">üîä</span></button>

                    <button class="tactical-btn" onclick="window.toggleVoice()" title="Voice Comms"><span id="mic-btn">üéôÔ∏è</span></button>

                    <button class="tactical-btn" onclick="window.togglePause()" title="Pause System">‚è∏Ô∏è</button>

                    <button class="tactical-btn alert-btn" id="btn-help" onclick="window.toggleHelp()" title="Request Backup">‚úã</button>

                </div>

                

                <div id="input-container" class="console-core">

                    <div class="core-hologram">

                        <form id="game-form" onsubmit="return false;">

                            <input type="tel" id="player-input" autocomplete="off" placeholder="AWAITING INPUT..." autofocus>

                        </form>

                    </div>

                    <div class="input-hint">TARGETING SYSTEM ACTIVE // PRESS ENTER TO FIRE</div>

                </div>



                <div class="console-wing">

                    <button class="trigger-btn emp-trigger" onclick="window.activateEMP()">

                        <div class="trigger-icon">‚ö°</div>

                        <div class="trigger-info">

                            <span class="t-name">EMP</span>

                            <span class="t-key">[SPACE]</span>

                        </div>

                    </button>

                    <button class="trigger-btn slow-trigger" onclick="window.activateSlowMo()">

                        <div class="trigger-icon">‚è≥</div>

                        <div class="trigger-info">

                            <span class="t-name">SLOW</span>

                            <span class="t-key">[SHIFT]</span>

                        </div>

                    </button>

                </div>

                

            </div>



            <div id="virtual-numpad">

                <div class="numpad-row">

                    <button class="num-btn" onclick="window.pressKey('1')">1</button>

                    <button class="num-btn" onclick="window.pressKey('2')">2</button>

                    <button class="num-btn" onclick="window.pressKey('3')">3</button>

                </div>

                <div class="numpad-row">

                    <button class="num-btn" onclick="window.pressKey('4')">4</button>

                    <button class="num-btn" onclick="window.pressKey('5')">5</button>

                    <button class="num-btn" onclick="window.pressKey('6')">6</button>

                </div>

                <div class="numpad-row">

                    <button class="num-btn" onclick="window.pressKey('7')">7</button>

                    <button class="num-btn" onclick="window.pressKey('8')">8</button>

                    <button class="num-btn" onclick="window.pressKey('9')">9</button>

                </div>

                <div class="numpad-row">

                    <button class="num-btn clear-btn" onclick="window.pressClear()">C</button>

                    <button class="num-btn" onclick="window.pressKey('0')">0</button>

                    <button class="num-btn" onclick="window.pressKey('-')">-</button>

                    <button class="num-btn fire-btn" onclick="window.pressEnter()">üî•</button>

                </div>

            </div>



            <div id="combo-container" class="hidden">

                <div id="combo-label">COMBO</div>

                <div id="combo-value">x0</div>

            </div>



            <div id="training-modal" class="modal hidden">

                <div class="modal-content neon-border" style="border-color: #00e5ff; box-shadow: 0 0 40px rgba(0, 229, 255, 0.2);">

                    <h2 style="color: #00e5ff; font-family: 'Orbitron';">N.E.X.U.S. SIMULATION</h2>

                    <p class="subtitle">TRAINING MODULES ACTIVE</p>

                    

                    <div id="ai-question-box" style="margin: 20px 0; padding: 20px; background: rgba(0,0,0,0.5); border: 1px solid #334; border-radius: 10px;">

                        <h1 id="train-q" style="font-size: 40px; margin: 0; color: white;">24 + 15 = ?</h1>

                    </div>



                    <div id="ai-options-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;"></div>



                    <div id="ai-tip-box" class="hidden" style="background: rgba(255, 170, 0, 0.1); padding: 10px; border-left: 3px solid orange; text-align: left; margin-bottom: 20px;">

                        <strong style="color: orange;">TACTICAL TIP:</strong>

                        <span id="train-tip" style="color: #ccc; font-size: 14px;">Break it down: 20+10 is 30, 4+5 is 9.</span>

                    </div>



                    <button class="btn text-only" onclick="window.closeTraining()">END SIMULATION</button>

                </div>

            </div>



            <div id="incubator-modal" class="modal hidden">

    <div class="modal-content" style="max-width: 600px; text-align: center; border-color: #b000ff; box-shadow: 0 0 40px rgba(176,0,255,0.3);">

        

        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom: 20px;">

            <h1 class="neon-blue" style="color: #b000ff; margin:0; text-shadow: 0 0 10px #b000ff;">CYBER-CORE INCUBATOR</h1>

            <div style="color: #ffd700; font-family: 'Orbitron';">üí∞ <span id="inc-coin-display">0</span></div>

        </div>



        <p style="color: #ccc; font-family: 'Rajdhani'; font-size: 16px;">

            Decrypt cores to awaken Tactical Cyber-Companions. Higher rarities provide stronger combat and logic buffs.

        </p>



        <div style="background: #111; border: 1px solid #333; border-radius: 5px; padding: 10px; margin: 20px 0;">

            <div style="display:flex; justify-content:space-between; margin-bottom: 5px;">

                <span style="color:#ff0055; font-weight:bold; font-size:12px;">MYTHIC DROP RATE: 0.01%</span>

                <span id="pity-text" style="color:#aaa; font-size:12px;">MYTHIC GUARANTEE: 0 / 1000</span>

            </div>

            <div style="width: 100%; height: 10px; background: #000; border-radius: 5px; overflow: hidden; border: 1px solid #550000;">

                <div id="pity-bar-fill" style="width: 0%; height: 100%; background: linear-gradient(90deg, #ff0055, #ffd700); transition: width 0.3s;"></div>

            </div>

        </div>



        <div id="incubator-animation" class="hidden" style="min-height: 250px; display: flex; flex-direction: column; justify-content: center; align-items: center;">

            </div>



        <div id="incubator-buttons" style="display: flex; gap: 15px; justify-content: center; margin-top: 30px;">

            

            <div style="flex: 1; border: 1px solid #00e5ff; background: rgba(0,229,255,0.05); padding: 20px; border-radius: 8px;">

                <h3 style="color:#00e5ff; margin-top:0;">STANDARD CORE</h3>

                <p style="font-size:12px; color:#888;">Contains Common to Mythic companions.</p>

                <button class="btn secondary" style="width:100%; margin:0;" onclick="window.buyCyberCore(500, false)">DECRYPT (500 üí∞)</button>

            </div>



            <div style="flex: 1; border: 1px solid #ffd700; background: rgba(255,215,0,0.05); padding: 20px; border-radius: 8px; position:relative; overflow:hidden;">

                <div style="position:absolute; top:5px; right:-25px; background:#ff0055; color:white; font-size:10px; font-weight:bold; padding:2px 30px; transform:rotate(45deg);">VIP</div>

                <h3 style="color:#ffd700; margin-top:0;">PREMIUM CORE</h3>

                <p style="font-size:12px; color:#888;">No Commons! High chance for Rare+.</p>

                <button class="btn primary" style="width:100%; margin:0; box-shadow: 0 0 15px #ffd700;" onclick="window.buyCyberCore(2000, true)">DECRYPT (2000 üí∞)</button>

            </div>



        </div>



        <button class="btn text-only" style="margin-top: 20px;" onclick="window.closeIncubator()">‚¨Ö RETURN TO BASE</button>

    </div>

</div>



            <div id="start-modal" class="modal">

                <div class="modal-content neon-border" style="width: 900px; padding: 0; overflow: hidden; background: #05070a;">

                    

                    <div id="auth-section" style="padding: 50px;">

                        <h1 class="game-title" style="margin-bottom: 30px;">JESSMATH <span class="highlight">ELITE</span></h1>

                        <div class="auth-tabs">

                            <button class="tab-btn active" onclick="window.switchTab('login')">LOGIN</button>

                            <button class="tab-btn" onclick="window.switchTab('register')">REGISTER</button>

                        </div>



                        <div id="login-form" class="auth-form" style="max-width: 400px; margin: 0 auto;">

                            <input type="email" id="login-email" class="auth-input" placeholder="EMAIL ADDRESS">

                            <input type="password" id="login-pass" class="auth-input" placeholder="PASSWORD">

                            <button class="btn primary" onclick="window.loginUser()">ACCESS TERMINAL</button>

                        </div>



                        <div id="register-form" class="auth-form hidden" style="max-width: 400px; margin: 0 auto;">

                            <input type="text" id="reg-username" class="auth-input" placeholder="CODENAME (AGENT NAME)" maxlength="12">

                            <input type="email" id="reg-email" class="auth-input" placeholder="EMAIL ADDRESS">

                            <input type="password" id="reg-pass" class="auth-input" placeholder="PASSWORD">

                            <button class="btn secondary" onclick="window.registerUser()">CREATE IDENTITY</button>

                        </div>

                        

                        <p id="auth-msg" style="color: #ff0055; font-size: 12px; margin-top: 10px; height: 15px;"></p>

                    </div>



                    <div id="profile-section" class="hidden dashboard-container">

    

    <div class="dash-global-bar">

        <div class="sys-status blink">üü¢ UPLINK SECURE</div>

        <button class="btn text-only alert-text" onclick="window.logoutUser()">[ ‚èè EMERGENCY DISCONNECT ]</button>

    </div>



    <div class="dashboard-body">

        <div class="identity-panel glass-panel">

            <div class="avatar-ring">

                <img id="dash-avatar-img" src="https://img.icons8.com/color/96/000000/astronaut.png">

                <div class="hologram-scanline"></div>

            </div>

            

            <h2 id="agent-name-display" class="agent-name">AGENT</h2>

            <div id="rank-title" class="agent-rank">CADET</div>

            

            <div class="resource-box">

                <span class="icon">ü™ô</span> 

                <span id="dash-coins-display" class="coin-value">0</span> 

                <span class="label">CREDITS</span>

            </div>



            <div class="xp-section">

                <div class="xp-header">

                    <span>EXP LEVEL</span>

                    <span id="xp-text">0 / 1000</span>

                </div>

                <div class="xp-track">

                    <div id="profile-xp-fill" class="xp-fill"></div>

                </div>

            </div>



            <button class="btn secondary holo-btn" onclick="window.openAgentDashboard()">

                üìä ACCESS DOSSIER

            </button>

        </div>



        <div class="mission-control-panel">

            <div class="section-title">DEPLOYMENT VECTORS</div>

            

            <button class="btn primary campaign-btn" onclick="window.openCampaignMap()">

                <span class="icon">üåå</span> CAMPAIGN OPERATION

                <div class="btn-glitch-layer"></div>

            </button>

            

            <div class="sub-modes-grid">

                <button class="btn secondary action-btn" onclick="window.startSolo()">

                    <span class="icon">üöÄ</span> SURVIVAL

                </button>

                <button class="btn secondary action-btn" onclick="window.showMultiplayerMenu()">

                    <span class="icon">‚öîÔ∏è</span> MULTIPLAYER

                </button>

                <button class="btn secondary action-btn class-btn" onclick="window.openClassSelection()">

                    <span class="icon">üë®‚Äçüè´</span> CLASSROOM

                </button>

            </div>



            <div class="section-divider"></div>

            <div class="section-title">SYSTEM TERMINALS</div>



            <div class="terminals-grid">

                <button class="terminal-btn comms-btn" onclick="window.toggleCommsSidebar()">

                    <span class="icon">üì°</span>

                    <span class="label">NETWORK</span>

                </button>

                <button class="terminal-btn" onclick="window.openShop()">

                    <span class="icon">üõ†Ô∏è</span>

                    <span class="label">ARMORY</span>

                </button>

                <button class="terminal-btn" onclick="window.showLeaderboard()">

                    <span class="icon">üèÜ</span>

                    <span class="label">RANKINGS</span>

                </button>

                <button class="terminal-btn jessbook-btn" onclick="window.openCodex()">

                    <span class="icon">üìò</span>

                    <span class="label">JESSBOOK</span>

                </button>

                <button class="terminal-btn incubator-btn" onclick="window.openIncubator()">

                    <span class="icon">üêæ</span>

                    <span class="label">INCUBATOR</span>

                </button>

            </div>

        </div>

    </div>

</div>



                    <div id="guest-option" style="padding-bottom: 20px; background: #05070a;">

                        <button class="btn text-only" style="font-size: 12px; color: #666;" onclick="window.playAsGuest()">[ PLAY AS GUEST - NO SAVE ]</button>

                    </div>



                </div>

            </div>



            <div id="mission-config-modal" class="modal hidden">

    <div class="modal-content-landscape" style="width: 850px; max-width: 95vw; height: auto;">

        

        <div class="modal-header-landscape">

            <div class="modal-title">MISSION BRIEFING</div>

            <button class="modal-close-btn" onclick="window.cancelMission()">‚ùå ABORT</button>

        </div>

        

        <div class="setup-grid-layout" style="grid-template-columns: 1fr 1fr; gap: 40px; margin-top: 10px;">

            

            <div class="setup-column">

                <h3 class="setup-section-title" style="color: #ff0055; border-color: rgba(255,0,85,0.3);">THREAT LEVEL</h3>

                <div class="setup-item" style="border-color: #ff0055; flex-grow: 1;">

                    <p style="color:#aaa; font-size:13px; margin-top:0;">Select enemy generation algorithms:</p>

                    <div class="diff-select-container" style="flex-direction: column; align-items: flex-start; gap: 20px;">

                        <label class="diff-label"><input type="radio" name="diff-select" value="easy"><span class="radiomark"></span> EASY (Slower pacing, base math)</label>

                        <label class="diff-label"><input type="radio" name="diff-select" value="medium" checked><span class="radiomark"></span> MEDIUM (Standard combat pacing)</label>

                        <label class="diff-label"><input type="radio" name="diff-select" value="hard"><span class="radiomark"></span> HARD (Aggressive spawning, complex math)</label>

                    </div>

                </div>

            </div>



            <div class="setup-column">

                <h3 class="setup-section-title" style="color: #00e5ff;">TARGET OPERATIONS</h3>

                <div class="setup-item" style="flex-grow: 1;">

                    <p style="color:#aaa; font-size:13px; margin-top:0;">Select mathematical anomalies to neutralize:</p>

                    <div class="chip-container" style="display: flex; gap: 15px; flex-wrap: wrap;">

                        <label class="neon-chip"><input type="checkbox" id="op-add" checked><span>[+] ADDITION</span></label>

                        <label class="neon-chip"><input type="checkbox" id="op-sub"><span>[-] SUBTRACTION</span></label>

                        <label class="neon-chip"><input type="checkbox" id="op-mul"><span>[√ó] MULTIPLICATION</span></label>

                        <label class="neon-chip"><input type="checkbox" id="op-div"><span>[√∑] DIVISION</span></label>

                        <label class="neon-chip" style="width: 100%;"><input type="checkbox" id="op-alg"><span style="display: block; text-align: center; border-color: #b000ff; color: #b000ff;">[X] ALGEBRAIC PROTOCOLS</span></label>

                    </div>

                </div>

            </div>



        </div>



        <div class="setup-footer" style="margin-top: 30px;">

            <button class="btn primary launch-btn" onclick="window.confirmMission()">

                üöÄ INITIATE LAUNCH SEQUENCE

            </button>

        </div>



    </div>

</div>



           <div id="mp-menu-modal" class="modal hidden">

    <div class="modal-content-landscape" style="width: 900px; max-width: 95vw; height: auto;">

        

        <div class="modal-header-landscape">

            <div class="modal-title">MULTIPLAYER NETWORK</div>

            <button class="modal-close-btn" onclick="document.getElementById('mp-menu-modal').classList.add('hidden'); document.getElementById('start-modal').classList.remove('hidden');">‚ùå CLOSE</button>

        </div>

        

        <div class="setup-grid-layout" style="grid-template-columns: 1fr 1fr; gap: 40px; margin-top: 10px;">

            

            <div class="setup-column">

                <div class="setup-item" style="height: 100%; border-color: #ffd700; background: rgba(255, 215, 0, 0.05); justify-content: center; align-items: center; text-align: center; padding: 40px 20px;">

                    <h3 style="color: #ffd700; font-family: 'Orbitron'; font-size: 26px; margin-top: 0;">HOST OPERATION</h3>

                    <p style="color: #aaa; font-size: 14px; margin-bottom: 30px;">Create a secure lobby and establish connection protocols for backup agents.</p>

                    

                    <div class="radio-group" style="margin-bottom: 30px; display: flex; gap: 15px; width: 100%; justify-content: center;">

                        <label class="radio-btn">

                            <input type="radio" name="game-mode" value="vs" checked>

                            <span style="padding: 15px 30px; border-radius: 8px;">‚öîÔ∏è 1 VS 1</span>

                        </label>

                        <label class="radio-btn">

                            <input type="radio" name="game-mode" value="party">

                            <span style="padding: 15px 30px; border-radius: 8px;">üõ°Ô∏è TEAM CO-OP</span>

                        </label>

                    </div>

                    

                    <button class="btn primary" style="width: 100%; background: linear-gradient(90deg, #ffd700, #ffaa00); color: black; box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);" onclick="window.createRoom()">CREATE SECURE LOBBY</button>

                </div>

            </div>



            <div class="setup-column">

                <div class="setup-item" style="height: 100%; border-color: #00e5ff; background: rgba(0, 229, 255, 0.05); justify-content: center; align-items: center; text-align: center; padding: 40px 20px;">

                    <h3 style="color: #00e5ff; font-family: 'Orbitron'; font-size: 26px; margin-top: 0;">JOIN OPERATION</h3>

                    <p style="color: #aaa; font-size: 14px; margin-bottom: 30px;">Enter an active transmission code from a host commander.</p>

                    

                    <input type="text" id="join-code-input" class="cyber-input" style="width: 100%; font-size: 32px; letter-spacing: 12px; margin-bottom: 30px; border-color: #00e5ff; height: 75px;" placeholder="CODE" maxlength="10">

                    

                    <button class="btn primary" style="width: 100%;" onclick="window.joinRoom()">CONNECT TO SIGNAL</button>

                </div>

            </div>



        </div>

    </div>

</div>



            <div id="lobby-modal" class="modal hidden">

    <div class="modal-content-landscape" style="width: 1000px; max-width: 95vw; height: auto; min-height: 60vh;">

        

        <div class="modal-header-landscape">

            <div class="modal-title" id="lobby-title-text">TACTICAL LOBBY</div>

            <button class="modal-close-btn" onclick="window.abortStudent()" style="border-color: #ff0055; color: #ff0055;">‚ùå ABORT CONNECTION</button>

        </div>

        

        <div class="setup-grid-layout" style="grid-template-columns: 1fr 2fr; gap: 40px; margin-top: 10px;">

            

            <div class="setup-column">

                <div class="setup-item" style="text-align: center; justify-content: center; border-color: #ffd700; background: rgba(255, 215, 0, 0.05); padding: 30px;">

                    <p style="color: #aaa; font-size: 14px; margin: 0; letter-spacing: 2px;">TRANSMISSION CODE</p>

                    <h1 id="room-code-display" style="font-family: 'Orbitron'; font-size: 48px; color: #ffd700; text-shadow: 0 0 20px #ffd700; margin: 15px 0;">----</h1>

                    <p style="color: #00e5ff; font-size: 13px; margin: 0;">Share this code with your squad.</p>

                </div>

                

                <div id="host-controls" style="margin-top: auto;">

                    <button id="host-start-btn" class="btn primary launch-btn hidden" onclick="window.hostStartGame()" style="background: linear-gradient(90deg, #00ff41, #00e5ff);">

                        üöÄ INITIATE LAUNCH

                    </button>

                    <div id="client-wait-msg" class="blink hidden" style="background: rgba(0, 229, 255, 0.1); border: 1px dashed #00e5ff; color: #00e5ff; padding: 20px; text-align: center; font-family: 'Orbitron'; border-radius: 8px;">

                        AWAITING HOST INITIATION...

                    </div>

                </div>

            </div>



            <div class="setup-column" style="display: flex; flex-direction: column;">

                <h3 class="setup-section-title" style="color: #00ff41; border-color: rgba(0, 255, 65, 0.3);">CONNECTED AGENTS</h3>

                <div class="setup-item" style="flex-grow: 1; padding: 20px; overflow-y: auto; background: rgba(0,0,0,0.6);">

                    <div id="lobby-players" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 15px;">

                        </div>

                </div>

            </div>



        </div>

    </div>

</div>



            <div id="leaderboard-modal" class="modal hidden">

    <div class="modal-content-landscape" style="width: 1000px; max-width: 95vw; height: 85vh;">

        

        <div class="modal-header-landscape">

            <div class="modal-title">ELITE LEADERBOARDS</div>

            <button class="modal-close-btn" onclick="window.closeLeaderboard()">‚ùå CLOSE</button>

        </div>



        <div class="lb-mode-tabs" style="display: flex; gap: 10px; margin-bottom: 20px; border-bottom: 2px solid #333; padding-bottom: 15px;">

            <button class="tab-btn active" onclick="window.switchLbMode('solo', event)">üöÄ SOLO SURVIVAL</button>

            <button class="tab-btn" onclick="window.switchLbMode('vs', event)">‚öîÔ∏è 1V1 DUELS</button>

            <button class="tab-btn" onclick="window.switchLbMode('party', event)">üõ°Ô∏è TEAM OPS</button>

            <button class="tab-btn" onclick="window.switchLbMode('classroom', event)" style="color: #ffd700;">üë®‚Äçüè´ CLASSROOM (STANDARD)</button>

        </div>

        

        <div class="armory-layout">

            <div class="armory-sidebar" style="width: 220px;">

                <h4 style="color: #00e5ff; font-family: 'Rajdhani'; letter-spacing: 2px; margin-top: 0;">COMBAT SECTOR</h4>

                

                <div class="lb-filter-btn" onclick="window.switchLbOp('add', this)">[+] ADDITION</div>

                <div class="lb-filter-btn" onclick="window.switchLbOp('sub', this)">[-] SUBTRACTION</div>

                <div class="lb-filter-btn" onclick="window.switchLbOp('mul', this)">[√ó] MULTIPLICATION</div>

                <div class="lb-filter-btn" onclick="window.switchLbOp('div', this)">[√∑] DIVISION</div>

                <div class="lb-filter-btn" onclick="window.switchLbOp('alg', this)">[X] ALGEBRA</div>

                <div class="lb-filter-btn active" onclick="window.switchLbOp('mixed', this)" style="margin-top: 15px; border-color: #ffd700; color: #ffd700;">[‚ôæÔ∏è] MIXED OPS</div>

            </div>



            <div class="armory-content-area" style="display: flex; flex-direction: column;">

                <h3 id="lb-dynamic-title" style="margin: 0 0 20px 0; color: #fff; font-family: 'Orbitron'; font-size: 18px; text-shadow: 0 0 10px rgba(255,255,255,0.3); border-bottom: 1px dashed #444; padding-bottom: 10px;">

                    GLOBAL RANKINGS: SOLO SURVIVAL // MIXED OPS

                </h3>



                <div id="lb-podium-container" style="display: flex; justify-content: center; align-items: flex-end; gap: 20px; height: 180px; margin-bottom: 30px; flex-shrink: 0;">

                    </div>



                <div style="flex-grow: 1; background: rgba(0,0,0,0.5); border: 1px solid #333; border-radius: 8px; overflow-y: auto;">

                    <table style="width: 100%; border-collapse: collapse; text-align: left; font-family: 'Rajdhani'; font-size: 16px;">

                        <thead style="background: #111; position: sticky; top: 0; z-index: 10;">

                            <tr style="color: #aaa; font-family:'Orbitron'; font-size:12px;">

                                <th style="padding: 15px; border-bottom: 2px solid #00e5ff; width: 60px; text-align: center;">RANK</th>

                                <th style="padding: 15px; border-bottom: 2px solid #00e5ff;">AGENT CODENAME</th>

                                <th style="padding: 15px; border-bottom: 2px solid #00e5ff; text-align: right;">EFFICIENCY RATING</th>

                            </tr>

                        </thead>

                        <tbody id="lb-table-body">

                            </tbody>

                    </table>

                </div>



            </div>

        </div>



    </div>

</div>



            <div id="pause-modal" class="modal hidden">

                <div class="modal-content">

                    <h2 id="pause-title">SYSTEM PAUSED</h2>

                    <button id="btn-resume-game" class="btn primary" onclick="window.togglePause()">RESUME</button>

                    <button class="btn secondary" onclick="window.goHome()">ABORT MISSION</button>

                </div>

            </div>



            <div id="report-modal" class="modal hidden" style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0, 0, 0, 0.95); z-index: 9999; display: flex; justify-content: center; align-items: center;">

    

    <div class="modal-content" style="background: #05070a; border: 2px solid #ff0055; box-shadow: 0 0 40px rgba(255, 0, 85, 0.3); max-width: 1200px; width: 95%; height: 85vh; padding: 30px; border-radius: 10px; display: flex; flex-direction: column; align-items: stretch;">

        

        <div style="display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #333; padding-bottom: 15px; margin-bottom: 20px;">

            <h1 class="neon-red" style="margin: 0; font-size: 35px; letter-spacing: 3px;">MISSION DEBRIEF</h1>

            <h2 class="neon-gold" style="margin: 0;">SCORE: <span id="rep-score">0</span></h2>

        </div>



        <div style="display: grid; grid-template-columns: 1fr 1.5fr; gap: 30px; height: 100%; overflow: hidden;">

            

            <div style="background: rgba(255, 0, 85, 0.05); border: 1px solid #ff0055; border-radius: 10px; padding: 25px; display: flex; flex-direction: column; justify-content: space-between;">

                

                <div id="mission-debrief-container" style="background: rgba(0,0,0,0.6); padding: 20px; border-radius: 8px; border-left: 5px solid #ff0055; text-align: left;">

                    <p style="margin: 0 0 5px 0; color: #888; font-size: 14px;">COMBAT EVALUATION:</p>

                    <h3 id="debrief-rank" style="margin: 0; font-family: 'Orbitron'; font-size: 28px; color: #ff0055; text-shadow: 0 0 10px #ff0055;">SYSTEM CRITICAL</h3>

                    <p id="debrief-msg" style="margin: 15px 0 0 0; color: #ccc; font-style: italic; font-size: 16px; line-height: 1.5;">

                        "Analysis ongoing..."

                    </p>

                </div>



                <div class="retry-actions" style="margin-top: 20px; display: flex; flex-direction: column; gap: 10px;">

                    <button id="real-submit-btn" class="btn primary" onclick="window.submitScore()" style="padding: 15px;">üì° UPLOAD DATA TO HQ</button>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">

                        <button class="btn secondary" style="border-color: #00e5ff; color: #00e5ff; padding: 15px; font-size: 14px;" onclick="window.startAITraining()">üß† AI TRAINING</button>

                        <button class="btn secondary" onclick="window.startSolo()" style="padding: 15px; font-size: 14px;">üîÑ RETRY</button>

                    </div>

                    <button class="btn text-only" onclick="window.goHome()">RETURN TO BASE</button>

                </div>

            </div>



            <div style="background: #0a0a0f; border: 1px solid #333; border-radius: 10px; display: flex; flex-direction: column; overflow: hidden;">

                <div style="background: #111; padding: 15px; border-bottom: 1px solid #333; display: flex; justify-content: space-between; align-items: center;">

                    <h3 style="margin: 0; color: #00e5ff; font-family: 'Orbitron'; letter-spacing: 2px;">TACTICAL LOG (MISTAKES)</h3>

                </div>

                <div id="mistakes-log" style="flex-grow: 1; padding: 15px; overflow-y: auto; display: block !important;">

                    <div style="text-align:center; color:#666; margin-top: 20px;">Fetching logs...</div>

                </div>

            </div>



        </div>

    </div>

</div>

            <div id="win-modal" class="modal hidden">

                <div class="modal-content neon-border" style="border-color: #00ff41; box-shadow: 0 0 30px #00ff41;">

                    <h1 class="highlight" style="font-size: 60px; color: #00ff41;">VICTORY!</h1>

                    <p class="subtitle" style="color: white;">OPPONENT NEUTRALIZED</p>

                    <div class="stats-grid" style="margin: 20px 0;">

                        <div class="stat-box">

                            <small style="color:#889">SCORE</small><br>

                            <span id="win-score" class="value neon-gold" style="font-size:40px">0</span>

                        </div>

                    </div>

                    <button class="btn primary" onclick="window.submitScore()">UPLOAD VICTORY DATA</button>

                    <button class="btn secondary" onclick="window.startSolo()">PLAY AGAIN</button>

                    <button class="btn text-only" onclick="window.goHome()">RETURN TO BASE</button>

                </div>

            </div>



            <div id="class-selection-modal" class="modal hidden">

                <div class="modal-content neon-border" style="width: 450px;">

                    <h2 style="color: #ffd700; font-family: 'Orbitron';">IDENTIFY ROLE</h2>

                    <p class="subtitle">WHO IS ACCESSING THE TERMINAL?</p>



                    <div id="role-buttons">

                        <button class="btn primary" onclick="window.selectTeacherRole()" style="background: #ffd700; color: #000;">üë®‚Äçüè´ I AM A TEACHER</button>

                        <button class="btn secondary" onclick="window.selectStudentRole()" style="border-color: #00ff41; color: #00ff41;">üéì I AM A STUDENT</button>

                    </div>



                    <div id="student-class-input-section" class="hidden" style="margin-top: 20px;">

                        <label style="color: #00ff41; font-weight: bold; display: block; margin-bottom: 10px;">ENTER CLASS CODE:</label>

                        <input type="text" id="class-code-direct" class="main-input" placeholder="CLASS-XXXX" style="border-color: #00ff41;">

                        <button class="btn primary" onclick="window.joinClassDirect()" style="background: #00ff41;">CONNECT TO CLASS</button>

                    </div>



                    <button class="btn text-only" onclick="window.closeClassSelection()" style="margin-top: 15px;">CANCEL</button>

                </div>

            </div>



            <div id="classroom-setup-modal" class="modal hidden">

    <div class="modal-content-landscape" style="width: 900px; max-width: 95vw; height: auto; max-height: 85vh;">

        

        <div class="modal-header-landscape">

            <div class="modal-title">CLASS DEPLOYMENT SETUP</div>

            <button class="modal-close-btn" onclick="window.closeClassroomSetup()">‚ùå CANCEL</button>

        </div>

        

        <div class="setup-grid-layout">

            

            <div class="setup-column">

                <h3 class="setup-section-title">MISSION LOGISTICS</h3>

                

                <div class="setup-item">

                    <label>CLASS IDENTIFIER</label>

                    <input type="text" id="class-name-input" class="cyber-input" placeholder="e.g. GRADE 10 - ALPHA">

                </div>



                <div class="setup-item">

                    <label>TIME LIMIT (MINUTES)</label>

                    <div class="stepper-group">

                        <button onclick="window.adjustTime(-1)" class="step-btn">‚ùÆ</button>

                        <div id="time-display" class="step-display" data-value="2">02:00</div>

                        <button onclick="window.adjustTime(1)" class="step-btn">‚ùØ</button>

                    </div>

                </div>



                <div class="setup-item">

                    <label>ENGAGEMENT ROUNDS</label>

                    <div class="stepper-group">

                        <button onclick="window.adjustRounds(-1)" class="step-btn">‚ùÆ</button>

                        <div id="rounds-display" class="step-display" data-value="1">1</div>

                        <button onclick="window.adjustRounds(1)" class="step-btn">‚ùØ</button>

                    </div>

                </div>

            </div>



            <div class="setup-column">

                <h3 class="setup-section-title" style="color: #ffd700; border-color: rgba(255, 215, 0, 0.3);">COMBAT PARAMETERS</h3>

                

                <div class="setup-item">

                    <label style="color: #ffd700;">THREAT LEVEL</label>

                    <div class="diff-select-container">

                        <label class="diff-label"><input type="radio" name="class-diff" value="easy"><span class="radiomark"></span> EASY</label>

                        <label class="diff-label"><input type="radio" name="class-diff" value="medium" checked><span class="radiomark"></span> MED</label>

                        <label class="diff-label"><input type="radio" name="class-diff" value="hard"><span class="radiomark"></span> HARD</label>

                    </div>

                </div>



                <div class="setup-item">

                    <label style="color: #ffd700;">TARGET TOPIC</label>

                    <div class="chip-container">

                        <label class="neon-chip"><input type="radio" name="topic-select" value="integers" onclick="window.toggleSubOps()" checked><span>INTEGERS</span></label>

                        <label class="neon-chip"><input type="radio" name="topic-select" value="algebra" onclick="window.toggleSubOps()"><span>ALGEBRA</span></label>

                        <label class="neon-chip"><input type="radio" name="topic-select" value="mixed" onclick="window.toggleSubOps()"><span>MIXED</span></label>

                    </div>

                </div>



                <div class="setup-item" id="sub-ops-panel">

                    <label style="color: #ffd700;">ALLOWED OPERATIONS</label>

                    <div class="chip-container">

                        <label class="neon-chip"><input type="checkbox" id="chk-add" checked><span>[+] ADD</span></label>

                        <label class="neon-chip"><input type="checkbox" id="chk-sub" checked><span>[-] SUB</span></label>

                        <label class="neon-chip"><input type="checkbox" id="chk-mul"><span>[√ó] MUL</span></label>

                        <label class="neon-chip"><input type="checkbox" id="chk-div"><span>[√∑] DIV</span></label>

                    </div>

                </div>

            </div>

            

        </div>



        <div class="setup-footer">

            <button class="btn primary launch-btn" onclick="window.createClassroom()">

                üöÄ INITIALIZE CLASS DEPLOYMENT

            </button>

        </div>



    </div>

</div>



        </div> 

        

        <<div id="teacher-dashboard" class="hidden">
    
    <div class="dashboard-header">
        <div class="header-status">
            <h2 class="neon-text" style="margin: 0; font-size: 24px; font-family: 'Orbitron'; color: #00e5ff; text-shadow: 0 0 10px #00e5ff;">CLASS-<span id="dash-room-code">####</span></h2>
            <div id="dash-status" style="color: #ffd700; font-family: 'Courier New', monospace; margin-top: 5px; font-weight: bold;">AGENTS: 0</div>
        </div>
        
        <div class="header-controls" style="display: flex; gap: 15px; align-items: center;">
            <button id="btn-start-round" class="btn primary" onclick="window.adminStartRound()" style="margin: 0; padding: 10px 30px; font-size: 14px; min-width: 180px;">‚ñ∂ START ROUND</button>
            <button id="btn-freeze-toggle" class="btn secondary hidden" onclick="window.adminFreezeAll()" style="margin: 0; padding: 10px 30px; font-size: 14px; border-color: #00e5ff; color: #00e5ff;">‚ùÑÔ∏è FREEZE</button>
            <button id="btn-stop-round" class="btn danger" onclick="window.adminForceStop()" style="margin: 0; padding: 10px 30px; font-size: 14px; background: rgba(255,0,85,0.2); border-color: #ff0055; color: #ff0055;">‚èπ STOP ROUND</button>
            <div style="width: 2px; height: 30px; background: #333; margin: 0 10px;"></div>
            <button id="btn-exit-dash" class="btn text-only" onclick="window.closeClassEntirely()" style="margin: 0; padding: 10px; color: #888;">EXIT</button>
        </div>
    </div>

    <div class="dashboard-viewport">
        
        <div class="dash-tabs">
            <button class="tab-btn active" onclick="window.switchDashTab('roster', event)">üì° LIVE ROSTER</button>
            <button class="tab-btn" onclick="window.switchDashTab('grid', event)">üïµÔ∏è‚Äç‚ôÇÔ∏è SPY GRID</button>
            <button class="tab-btn" onclick="window.switchDashTab('podium', event)">üèÜ RANKINGS</button>
            <button class="tab-btn" onclick="window.switchDashTab('reports', event)">üìÑ DATA REPORTS</button>
        </div>

        <div id="view-roster" class="dash-view">
           <div id="roster-grid"></div>
        </div>
        
        <div id="view-grid" class="dash-view hidden">
            <div id="spy-grid-container"></div>
        </div>

        <div id="view-podium" class="dash-view hidden">
            <div class="grand-orbits">
                <div class="g-orbit g-orbit-1"></div>
                <div class="g-orbit g-orbit-2"></div>
                <div class="g-orbit g-orbit-3"></div>
            </div>
            
            <h2 class="grand-leaderboard-title">CURRENT LEADERBOARD</h2>
            
            <div class="grand-podium-container">
                <div class="grand-pillar silver-pillar">
                    <div class="css-medal silver-medal"><div class="medal-ribbon"></div><div class="medal-coin">‚≠ê</div></div>
                    <div id="p2-name" class="grand-name">AWAITING</div>
                    <div id="p2-score" class="grand-score">0 <span>PTS</span></div>
                    <div class="grand-beam"></div><div class="grand-base-ring"></div>
                </div>
                <div class="grand-pillar gold-pillar">
                    <div class="css-medal gold-medal"><div class="medal-ribbon"></div><div class="medal-coin">üëë</div></div>
                    <div id="p1-name" class="grand-name">AWAITING</div>
                    <div id="p1-score" class="grand-score">0 <span>PTS</span></div>
                    <div class="grand-beam"></div><div class="grand-base-ring"></div>
                </div>
                <div class="grand-pillar bronze-pillar">
                    <div class="css-medal bronze-medal"><div class="medal-ribbon"></div><div class="medal-coin">‚≠ê</div></div>
                    <div id="p3-name" class="grand-name">AWAITING</div>
                    <div id="p3-score" class="grand-score">0 <span>PTS</span></div>
                    <div class="grand-beam"></div><div class="grand-base-ring"></div>
                </div>
                <div class="grand-platform"></div>
            </div>
            
            <div class="nexus-runner-up-list">
                <h3 class="nexus-list-title">ADDITIONAL OPERATIVES</h3>
                <div id="podium-list-body"></div>
            </div>
        </div>

        <div id="view-reports" class="dash-view hidden">
            
            <div id="reports-header-bar">
                <div class="reports-stats-group">
                    <div class="stat-box yellow-box">
                        <span class="stat-label">CLASS AVG SCORE</span>
                        <span id="rep-avg-score" class="stat-value yellow-text">0</span>
                    </div>
                    <div class="stat-box green-box">
                        <span class="stat-label">CLASS ACCURACY</span>
                        <span id="rep-avg-acc" class="stat-value green-text">0%</span>
                    </div>
                </div>
                <button class="btn secondary export-btn" onclick="window.exportToCSV()">üíæ EXPORT CSV</button>
            </div>
            
            <div id="reports-table-container">
                <table>
                    <thead>
                        <tr>
                            <th>AGENT NAME</th>
                            <th class="center-text">ROUNDS</th>
                            <th class="center-text">TOTAL SCORE</th>
                            <th class="center-text">ACCURACY</th>
                            <th class="center-text">STATUS</th>
                            <th class="center-text">ACTION</th>
                        </tr>
                    </thead>
                    <tbody id="report-list-body"></tbody>
                </table>
            </div>
            
        </div>

    </div> </div> ```


</div>



</div>

        

        <div id="awarding-modal" class="modal hidden" style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0, 0, 0, 0.98); z-index: 100000; display: flex; justify-content: center; align-items: center;">

    

    <div class="modal-content neon-border" style="width: 1200px; max-width: 95%; height: 90vh; padding: 0; display: flex; flex-direction: column; overflow: hidden; background: #05070a; border: 2px solid #ffd700; box-shadow: 0 0 60px rgba(255, 215, 0, 0.15);">

        

        <div style="background: rgba(255, 215, 0, 0.1); padding: 20px; border-bottom: 1px solid #ffd700; display: flex; justify-content: space-between; align-items: center;">

            <div>

                <h1 class="neon-gold" style="font-size: 32px; margin: 0; letter-spacing: 4px;">MISSION ACCOMPLISHED</h1>

                <p style="color: #888; margin: 0; font-family: 'Courier New'; font-size: 12px;">REPORT ID: <span id="final-room-code">CLASS-XXXX</span></p>

            </div>

            <div style="text-align: right;">

                <div style="font-family: 'Rajdhani'; color: #fff; font-size: 14px;">TOTAL AGENTS</div>

                <div id="final-student-count" style="font-family: 'Orbitron'; font-size: 24px; color: #00e5ff;">0</div>

            </div>

        </div>



        <div style="display: grid; grid-template-columns: 350px 1fr; height: 100%; overflow: hidden;">

            

            <div style="background: linear-gradient(180deg, rgba(20,20,30,0.5) 0%, rgba(0,0,0,0.8) 100%); border-right: 1px solid #333; padding: 20px; display: flex; flex-direction: column; align-items: center; justify-content: center;">

                <h3 style="color: #ffd700; font-family: 'Orbitron'; letter-spacing: 2px; margin-bottom: 40px; text-shadow: 0 0 10px #ffd700;">ELITE SQUAD</h3>

                

                <div id="winners-podium" style="display: flex; align-items: flex-end; justify-content: center; gap: 15px; width: 100%; height: 300px;">

                    </div>

            </div>



            <div style="padding: 30px; display: flex; flex-direction: column; gap: 20px; overflow-y: auto;">

                

                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px;">

                    <div class="stat-card">

                        <div class="stat-label">CLASS AVERAGE</div>

                        <div id="final-avg-score" class="stat-value neon-blue">0</div>

                    </div>

                    <div class="stat-card">

                        <div class="stat-label">ACCURACY RATE</div>

                        <div id="final-avg-acc" class="stat-value neon-green">0%</div>

                    </div>

                    <div class="stat-card" style="border-color: #ff0055;">

                        <div class="stat-label" style="color: #ff0055;">HARDEST TOPIC</div>

                        <div id="final-hardest-topic" class="stat-value" style="color: #ff0055; font-size: 24px;">NONE</div>

                    </div>

                </div>



                <div style="background: rgba(255,255,255,0.02); border: 1px solid #333; border-radius: 8px; padding: 20px;">

                    <h4 style="margin: 0 0 15px 0; color: #aaa; font-family: 'Rajdhani'; letter-spacing: 1px;">TACTICAL WEAKNESS ANALYSIS</h4>

                    <div id="class-weakness-report" style="height: 120px; display: flex; align-items: flex-end; gap: 10px;">

                        </div>

                </div>



                <div style="flex-grow: 1; background: rgba(255, 0, 85, 0.05); border: 1px solid #552233; border-radius: 8px; padding: 20px;">

                    <h4 style="margin: 0 0 10px 0; color: #ff0055; font-family: 'Orbitron'; font-size: 14px;">‚ö†Ô∏è AGENTS REQUIRING REINFORCEMENT</h4>

                    <div id="struggling-students-list" style="max-height: 100px; overflow-y: auto; font-family: 'Courier New'; font-size: 13px; color: #ccc;">

                        Scanning...

                    </div>

                </div>



            </div>

        </div>



        <div style="background: #111; padding: 15px; border-top: 1px solid #333; display: flex; justify-content: flex-end; gap: 15px;">

            <button class="btn text-only" onclick="window.adminForceStop()" style="width: auto; margin:0; font-size: 12px;">CLOSE</button>

            <button class="btn primary" onclick="window.saveAndExitClass()" style="width: auto; margin:0; padding: 12px 30px; font-size: 16px; background: #ffd700; color: #000; border: none;">üíæ EXPORT DATA & EXIT</button>

        </div>



    </div>

</div>



        <div class="modal-actions" style="margin-top: 30px; display: flex; justify-content: center; gap: 20px;">
    <button class="btn text-only" onclick="window.closeClassEntirely()" style="width: auto; padding: 15px 30px;">CLOSE WITHOUT SAVING</button>
    
    <button class="btn primary" onclick="window.saveAndExitClass()" style="width: auto; padding: 15px 50px; font-size: 20px;">üíæ SAVE REPORT & EXIT</button>
</div>



    </div>

</div>



    </div> 



    <div class="menu-actions" style="margin-top: 20px; display: block;">

                            <div class="main-menu-grid">

                                    <button class="btn primary" onclick="window.openCampaignMap()">üåå CAMPAIGN MODE</button>

                                    <button class="btn secondary" onclick="window.startSolo()">üöÄ SURVIVAL (ENDLESS)</button>

    

                                    <button class="btn secondary" onclick="window.showMultiplayerMenu()">‚öîÔ∏è MULTIPLAYER</button>

                                    <button class="btn secondary" onclick="window.openCodex()" style="border-color: #00ff41; color: #00ff41;">üìò JESSBOOK</button>

                                    <button class="btn secondary" onclick="window.openClassSelection()" style="border-color: #ffd700; color: #ffd700;">üë®‚Äçüè´ CLASS MODE</button>

                                    <button class="btn secondary" onclick="window.showLeaderboard()">üèÜ LEADERBOARD</button>

                                    <button class="btn secondary" onclick="window.openShop()">üõ†Ô∏è ARMORY (SHOP)</button>

                            </div>

                            <div style="margin-top: 15px;">

                                <button class="btn text-only" onclick="window.logoutUser()" style="color: #ff0055; font-size: 12px;">LOGOUT SYSTEM</button>

                            </div>

                        </div>

                    </div> <div id="guest-option" style="margin-top: 20px; border-top: 1px solid #333; padding-top: 10px;">

                        <button class="btn text-only" style="font-size: 10px; color: #666;" onclick="window.playAsGuest()">PLAY AS GUEST (NO SAVE)</button>

                    </div>

                </div>

            <div id="agent-dashboard-modal" class="modal hidden" style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0, 0, 0, 0.95); z-index: 9999; display: flex; justify-content: center; align-items: center;">

    

    <div class="modal-content" style="background: #05070a; border: 2px solid #00e5ff; box-shadow: 0 0 30px rgba(0, 229, 255, 0.3); max-width: 1200px; width: 95%; height: 90vh; padding: 30px; border-radius: 10px; display: flex; flex-direction: column; align-items: stretch;">

        

        <div style="display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #333; padding-bottom: 15px; margin-bottom: 20px;">

            <h1 class="neon-blue" style="margin: 0; font-size: 32px; letter-spacing: 3px;">TACTICAL SERVICE RECORD</h1>

            <button class="btn text-only" style="margin: 0; padding: 10px; color:#ff0055;" onclick="closeAgentDashboard()">‚ùå CLOSE</button>

        </div>



        <div style="display: grid; grid-template-columns: 300px 1fr; gap: 30px; height: 100%; overflow: hidden;">

            

            <div style="background: rgba(0, 229, 255, 0.05); border: 1px solid #004455; border-radius: 10px; padding: 20px; display: flex; flex-direction: column; align-items: center; overflow-y: auto;">

                <div style="position: relative; margin-bottom: 15px;">

                    <img id="dash-avatar-img" src="https://img.icons8.com/color/96/000000/astronaut.png" style="width: 120px; height: 120px; border-radius: 50%; border: 3px solid #ffd700; background: #111; box-shadow: 0 0 20px rgba(255,215,0,0.4);">

                </div>

                

                <h2 id="dash-agent-name" style="margin: 5px 0; color: #fff; font-family: 'Orbitron'; font-size: 24px;">AGENT</h2>

                <h4 id="dash-rank" style="margin: 0 0 15px 0; color: #ffd700; letter-spacing: 2px;">CADET</h4>

                

                <button class="btn secondary" style="width: 100%; font-size: 12px; padding: 10px;" onclick="toggleAvatarSelect()">CHANGE IDENTITY</button>



                <div id="avatar-selection-box" class="hidden" style="width: 100%; background: #000; border: 1px solid #333; padding: 10px; margin-top: 10px; border-radius: 5px;">

                    <p style="font-size: 10px; color: #aaa; margin-top: 0;">SELECT AVATAR:</p>

                    <div id="avatar-grid" style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px;"></div>

                </div>



                <div style="width: 100%; border-top: 1px solid #333; margin-top: 20px; padding-top: 20px;">

                    <p style="font-size: 12px; color: #00e5ff; margin-top: 0; letter-spacing: 1px;">COMBAT HONORS:</p>

                    <div id="badges-grid" style="display: flex; gap: 10px; flex-wrap: wrap; justify-content: center;"></div>

                </div>

            </div>



            <div style="display: flex; flex-direction: column; gap: 20px; overflow: hidden;">

                

                <div style="display: flex; gap: 15px; background: #111; padding: 10px 20px; border-radius: 8px; border: 1px solid #333;">

                    <select id="chart-filter" class="main-input" style="margin: 0; padding: 8px; font-size: 14px; width: 200px; background: #000; color: #00e5ff;" onchange="updateDashboardChart()">

                        <option value="all">ALL MODES</option>

                        <option value="solo">SOLO SURVIVAL</option>

                        <option value="vs">1V1 MULTIPLAYER</option>

                        <option value="party">TEAM PARTY</option>

                        <option value="classroom">CLASS MODE</option>

                    </select>

                    <select id="topic-filter" class="main-input" style="margin: 0; padding: 8px; font-size: 14px; width: 200px; background: #000; color: #00e5ff;" onchange="updateDashboardChart()">

                        <option value="all">ALL TOPICS</option>

                        <option value="+">ADDITION</option>

                        <option value="-">SUBTRACTION</option>

                        <option value="x">MULTIPLICATION</option>

                        <option value="√∑">DIVISION</option>

                        <option value="Alg">ALGEBRA</option>

                    </select>

                </div>



                <div style="flex: 1; background: #050505; border: 1px solid #222; border-radius: 8px; padding: 15px; position: relative;">

                    <div style="position: absolute; top: 15px; left: 15px; right: 15px; bottom: 15px;">

                        <canvas id="performanceChart"></canvas>

                    </div>

                </div>



                <div style="height: 35%; background: #0a0a0f; border: 1px solid #222; border-radius: 8px; overflow-y: auto;">

                    <table style="width: 100%; border-collapse: collapse; text-align: center; color: white; font-size: 14px; font-family: 'Rajdhani';">

                        <thead style="background: #151520; position: sticky; top: 0; z-index: 10;">

                            <tr>

                                <th style="padding: 12px; border-bottom: 2px solid #00e5ff; color: #aaa;">DATE</th>

                                <th style="padding: 12px; border-bottom: 2px solid #00e5ff; color: #aaa;">MODE</th>

                                <th style="padding: 12px; border-bottom: 2px solid #00e5ff; color: #aaa;">TOPIC</th>

                                <th style="padding: 12px; border-bottom: 2px solid #00e5ff; color: #aaa;">SCORE</th>

                                <th style="padding: 12px; border-bottom: 2px solid #00e5ff; color: #aaa;">ACCURACY</th>

                            </tr>

                        </thead>

                        <tbody id="match-history-body">

                            </tbody>

                    </table>

                </div>

            </div>

            

        </div>

    </div>

</div>



<div id="shop-modal" class="modal hidden">

    <div class="modal-content-landscape" style="width: 1000px; max-width: 95vw; height: 80vh;">

        

        <div class="modal-header-landscape">

            <div class="modal-title">THE ARMORY</div>

            <button class="modal-close-btn" onclick="window.closeShop()">‚ùå CLOSE</button>

        </div>

        

        <div class="armory-layout">

            <div class="armory-sidebar shop-tabs">

                <div class="armory-tab tab-btn active" onclick="window.switchShopTab('ships')">

                    <span class="icon">üõ∏</span> SKINS

                </div>

                <div class="armory-tab tab-btn" onclick="window.switchShopTab('upgrades')">

                    <span class="icon">‚ö°</span> UPGRADES

                </div>

                <div class="armory-tab tab-btn" onclick="window.switchShopTab('fx')">

                    <span class="icon">‚ú®</span> BATTLE FX

                </div>

                <div class="armory-tab tab-btn" onclick="window.switchShopTab('pets')" style="color: #ffd700; border-color: rgba(255, 215, 0, 0.3);">

                    <span class="icon">üêæ</span> COMPANIONS

                </div>

            </div>



            <div class="armory-content-area">

                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; background: rgba(0,0,0,0.5); padding: 10px 20px; border-radius: 8px; border: 1px solid #333;">

                    <div class="shop-balance" style="font-family: 'Orbitron'; font-size: 20px; color: #ffd700;">

                        STATUS: <span id="shop-coin-display">0</span> ü™ô

                    </div>

                    

                    <div id="shop-filter-container">

                        <label style="color: #00e5ff; font-family: 'Rajdhani'; margin-right: 10px;">CATEGORY:</label>

                        <select id="shop-ship-filter" class="main-input" style="width: auto; margin: 0; padding: 8px; background: #000; color: #00e5ff; font-size: 14px;" onchange="window.renderShopGrid()">

                            <option value="turret">PLAYER TURRET</option>

                            <option value="enemy">NORMAL ENEMY</option>

                            <option value="supply">SUPPLY CRATE</option>

                            <option value="boss">BOSS UNIT</option>

                        </select>

                    </div>

                </div>

                

                <div id="shop-grid" class="item-grid shop-grid">

                    </div>

            </div>

        </div>



    </div>

</div>

</div>

    <div id="codex-modal" class="modal hidden" style="z-index: 100000; background: rgba(0,0,0,0.85); backdrop-filter: blur(5px);">

    <div class="codex-overlay" onclick="window.closeCodex()"></div>

    

    <div class="book-stage">

        <div id="book" class="book">

            </div>



        <div class="book-controls">

            <button class="magic-btn" onclick="window.prevPage()">‚ùÆ PREV</button>

            <button class="magic-btn close" onclick="window.closeCodex()">CLOSE</button>

            <button class="magic-btn" onclick="window.nextPage()">NEXT ‚ùØ</button>

        </div>

    </div>

</div>



    <div id="cinematic-outro" class="hidden">

        <div class="scanline-bg"></div>

                <div class="outro-content">

                 <h1 id="outro-title" class="glitch-text">MISSION TERMINATED</h1>

                <div class="loader-line"></div>

          <p id="outro-sub">UPLOADING BLACK BOX DATA...</p>

        </div>

    </div>



    <div id="class-curtain" class="hidden">

    <div class="cyber-grid"></div>

    

    <div class="curtain-content">

        <div class="loader-ring"></div>

        <h2 id="curtain-title" class="glitch-text">SYSTEM INITIALIZING</h2>

        <div id="curtain-countdown" class="neon-number"></div>

        <p id="curtain-sub" class="blink-text">ESTABLISHING SECURE CONNECTION...</p>

    </div>

</div>







<div id="comms-sidebar" class="tactical-sidebar left-side closed">

    <div class="sidebar-scanline"></div>

    

    <div class="ts-header">

        <div>

            <h3 class="ts-title"><span class="blink" style="color:#00ff41;">‚óè</span> NETWORK UPLINK</h3>

            <p class="ts-sub">SECURE MULTIPLAYER CHANNEL</p>

        </div>

        <button class="ts-close-btn" onclick="window.toggleCommsSidebar()">‚úñ</button>

    </div>



    <div class="ts-tabs">

        <button class="ts-tab active" onclick="window.switchCommsTab('friends', event)">ALLIES</button>

        <button class="ts-tab" onclick="window.switchCommsTab('requests', event)">REQUESTS</button>

        <button class="ts-tab" onclick="window.switchCommsTab('search', event)">SEARCH</button>

    </div>



    <div id="comms-content-area" class="ts-content">

        <div id="comms-friends" class="comms-view">

            <div class="scanning-text">Fetching Allied Agents...</div>

        </div>



        <div id="comms-requests" class="comms-view hidden">

            <div class="scanning-text">No pending requests.</div>

        </div>



        <div id="comms-search" class="comms-view hidden">

            <div class="cli-input-box">

                <span class="cli-prompt">></span>

                <input type="text" id="agent-search-input" placeholder="ENTER CODENAME..." oninput="window.mockSearchAgent()">

            </div>

            <div id="search-results-area" style="margin-top: 15px;"></div>

        </div>

        

        <div id="comms-chat" class="comms-view hidden" style="display: flex; flex-direction: column; height: 100%;">

            <div class="chat-header">

                <button class="btn text-only" style="padding:0; color:#888;" onclick="window.closeChat()">‚ùÆ BACK</button>

                <span id="chat-target-name" style="color:#00e5ff; font-family:'Orbitron'; font-weight:bold;">AGENT</span>

                <button id="btn-voice-call" class="tactical-icon-btn" onclick="window.initiateVoiceCall()">üìû</button>

            </div>

            <div id="chat-messages" class="chat-history">

                <div class="encryption-notice">-- END-TO-END ENCRYPTION ACTIVE --</div>

            </div>

            <div class="cli-input-box" style="margin-top:10px;">

                <span class="cli-prompt">></span>

                <input type="text" id="chat-input" placeholder="TRANSMIT MESSAGE..." onkeypress="if(event.key==='Enter') window.sendChatMessage()">

                <button class="cli-send-btn" onclick="window.sendChatMessage()">SEND</button>

            </div>

        </div>

    </div>

</div>



<div id="jessbot-sidebar" class="tactical-sidebar right-side closed">
    <div class="sidebar-scanline"></div>
    
    <div class="ts-header" style="border-color: #ffd700; flex-direction: row-reverse;">
        <button class="ts-close-btn" style="color: #ffd700;" onclick="window.toggleNexusTerminal()">‚úñ</button>
        <div style="text-align: left;">
            <h3 class="ts-title" style="color: #ffd700;"><span class="blink" style="color:#ffd700;">‚öôÔ∏è</span> JESSBOT</h3>
            <p class="ts-sub" style="color: #aa8800;">TACTICAL OVERSEER V7</p>
        </div>
    </div>

    <div class="ts-tabs" style="border-bottom: 1px solid #ffd700; margin-bottom: 10px;">
        <button class="ts-tab active" id="tab-btn-jessbot" onclick="window.switchNexusTab('jessbot')" style="color:#ffd700;">ü§ñ ADVISOR</button>
        <button class="ts-tab" id="tab-btn-solver" onclick="window.switchNexusTab('solver')" style="color:#888;">üßÆ SOLVER</button>
    </div>

    <div id="nexus-view-jessbot" class="nexus-view">
        <div id="ai-waveform" class="waveform-container hidden">
            <div class="wave-bar"></div><div class="wave-bar"></div><div class="wave-bar"></div><div class="wave-bar"></div><div class="wave-bar"></div>
        </div>

        <div id="nexus-chat-history" class="ts-content" style="display: flex; flex-direction: column; gap: 15px;">
            <div class="data-block ai-block" style="border-color: #ffd700;">
                <span class="block-label" style="color: #ffd700;">JESSBOT // SYSTEM</span>
                Commander, I am operating on secure local channels. Select a tactical protocol below to analyze your data.
            </div>
        </div>

        <div class="ai-command-grid">
            <button class="ai-cmd-btn" onclick="window.executeJessBotCommand('analyze')"><span class="cmd-icon">üìä</span> ANALYSIS</button>
            <button class="ai-cmd-btn" onclick="window.executeJessBotCommand('status')"><span class="cmd-icon">üì°</span> STATUS</button>
            <button class="ai-cmd-btn" onclick="window.executeJessBotCommand('weakness')"><span class="cmd-icon">‚ö†Ô∏è</span> WEAKNESS</button>
            <button class="ai-cmd-btn" onclick="window.executeJessBotCommand('tip')"><span class="cmd-icon">üí°</span> TACTICS</button>
        </div>
    </div>

    <div id="nexus-view-solver" class="nexus-view hidden" style="display: flex; flex-direction: column; height: 100%;">
        <div class="cli-input-box" style="margin-bottom: 15px; border-color: #00e5ff;">
            <span class="cli-prompt" style="color: #00e5ff;">></span>
            <input type="text" id="solver-input" placeholder="e.g. 2x + 5 = 15" onkeypress="if(event.key==='Enter') window.runTacticalSolver()">
            <button class="cli-send-btn" onclick="window.runTacticalSolver()" style="color: #00e5ff;">DECRYPT</button>
        </div>
        
        <div id="solver-output" class="ts-content" style="flex-grow: 1; border: 1px dashed #00e5ff; padding: 10px; background: rgba(0, 229, 255, 0.05); overflow-y: auto; font-family: 'Courier New', monospace; font-size: 13px; color: #ccc;">
            <div style="text-align: center; color: #888; margin-top: 50px;">AWAITING EQUATION...</div>
        </div>
    </div>
</div>



<div id="agent-dossier-modal" class="modal hidden" style="z-index: 100001;">

    <div class="modal-content neon-border" style="width: 800px; display: grid; grid-template-columns: 1fr 1.5fr; gap: 20px; padding: 0; overflow: hidden; background: #05070a;">

        

        <div style="background: rgba(0, 229, 255, 0.05); padding: 30px; border-right: 1px solid #333; display: flex; flex-direction: column; align-items: center; justify-content: space-between;">

            <div style="text-align: center;">

                <img id="dossier-avatar" src="https://img.icons8.com/color/96/000000/astronaut.png" style="width:100px; border-radius:50%; border:2px solid #00e5ff; box-shadow: 0 0 15px #00e5ff;">

                <h2 id="dossier-name" style="margin: 10px 0 0 0; color: white; font-family: 'Orbitron'; font-size: 24px;">AGENT X</h2>

                <div id="dossier-rank" style="color: #ffd700; font-family: 'Rajdhani'; letter-spacing: 2px;">COMMANDER</div>

            </div>



            <div style="width: 100%; margin-top: 20px;">

                <div class="stat-line"><span>WIN RATE:</span> <span id="dossier-winrate" style="color:#00ff41;">0%</span></div>

                <div class="stat-line"><span>MISSIONS:</span> <span id="dossier-missions">0</span></div>

                <div class="stat-line"><span>TOP COMBO:</span> <span id="dossier-combo" style="color:#ffd700;">x0</span></div>

            </div>



            <div style="width: 100%; display: flex; flex-direction: column; gap: 10px; margin-top: 20px;">

                <button id="btn-add-ally" class="btn secondary" style="padding: 10px; font-size:12px; border-color:#00ff41; color:#00ff41;">‚úâÔ∏è SEND ALLY REQUEST</button>

                <button class="btn primary" style="padding: 10px; font-size:12px;" onclick="window.toggleCompareStats()">‚öñÔ∏è COMPARE STATS</button>

            </div>

        </div>



        <div style="padding: 20px; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative;">

            <button class="btn text-only" style="position: absolute; top: 10px; right: 10px; margin:0; padding:5px;" onclick="window.closeDossier()">‚ùå</button>

            

            <h3 style="color:#00e5ff; font-family:'Orbitron'; letter-spacing:2px; margin-bottom: 5px;">COMBAT PROFICIENCY</h3>

            <p style="color:#888; font-size:12px; margin-top:0;">TACTICAL SKILL ANALYSIS</p>

            

            <div style="width: 100%; height: 300px; position: relative;">

                <canvas id="skillRadarChart"></canvas>

            </div>

        </div>



    </div>

</div>



<div id="live-invite-popup" class="hidden" style="position:fixed; top:20px; right:20px; background:rgba(0,15,30,0.95); border:2px solid #ffd700; border-radius:8px; padding:15px; width:300px; box-shadow:0 0 20px rgba(255,215,0,0.3); z-index:100000; animation: slideInRight 0.5s forwards;">

    <h4 style="margin:0 0 10px 0; color:#ffd700; font-family:'Orbitron';">‚ö†Ô∏è INCOMING TRANSMISSION</h4>

    <p id="invite-msg" style="margin:0 0 15px 0; font-size:14px; color:#fff; font-family:'Rajdhani';">Agent is requesting backup!</p>

    <div style="display:flex; gap:10px;">

        <button class="btn primary" id="btn-accept-invite" style="margin:0; padding:10px; font-size:12px;">ACCEPT</button>

        <button class="btn secondary" id="btn-decline-invite" style="margin:0; padding:10px; font-size:12px; border-color:#ff0055; color:#ff0055;">DECLINE</button>

    </div>

</div>



<style>

@keyframes slideInRight { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }

</style>

<div id="intervention-report-modal" class="modal hidden" style="z-index: 200000; background: rgba(255,255,255,0.95);">

    <div class="modal-content" id="printable-report" style="background: white; color: black; border: none; box-shadow: 0 0 50px rgba(0,0,0,0.5); width: 600px; text-align: left; padding: 40px; font-family: 'Arial', sans-serif;">

        

        <div style="display:flex; justify-content: space-between; border-bottom: 2px solid #000; padding-bottom: 10px; margin-bottom: 20px;">

            <div>

                <h1 style="margin: 0; font-family: 'Orbitron'; color: #000; font-size:24px;">MATH DEFENDER</h1>

                <h3 style="margin: 0; color: #555;">N.E.X.U.S. Intervention Report</h3>

            </div>

            <div style="text-align: right; font-size: 12px; color: #555;">

                <strong>Date:</strong> <span id="report-date"></span><br>

                <strong>Generated by:</strong> Instructor System

            </div>

        </div>



        <h2 style="margin: 0 0 5px 0;">Agent Profile: <span id="report-student-name" style="color: #ff0055;"></span></h2>

        <p style="margin: 0 0 20px 0; color: #444;">This document outlines the tactical mathematical proficiency of the agent during live combat simulations.</p>



        <div style="display: flex; gap: 20px; margin-bottom: 20px;">

            <div style="flex: 1; background: #f0f0f0; padding: 15px; border-radius: 5px; border-left: 5px solid #00e5ff;">

                <h4 style="margin: 0 0 5px 0;">Overall Accuracy</h4>

                <div id="report-acc" style="font-size: 28px; font-weight: bold;">0%</div>

            </div>

            <div style="flex: 1; background: #f0f0f0; padding: 15px; border-radius: 5px; border-left: 5px solid #ff0055;">

                <h4 style="margin: 0 0 5px 0;">Primary Weakness</h4>

                <div id="report-weakness" style="font-size: 28px; font-weight: bold;">N/A</div>

            </div>

        </div>



        <h3 style="border-bottom: 1px solid #ccc; padding-bottom: 5px;">Instructor's Action Plan</h3>

        <p id="report-action-plan" style="line-height: 1.6; color: #222; font-style: italic; background: #fffde7; padding: 15px; border: 1px dashed #ccc;"></p>



        <div style="margin-top: 40px; text-align: center;" class="no-print">

            <button class="btn primary" style="background: #00e5ff; color: black; width: 45%; display: inline-block;" onclick="window.printReport()">üñ®Ô∏è PRINT REPORT</button>

            <button class="btn secondary" style="background: #333; color: white; width: 45%; display: inline-block;" onclick="document.getElementById('intervention-report-modal').classList.add('hidden')">CLOSE</button>

        </div>



    </div>

</div>



<div id="incoming-call-popup" class="hidden" style="position:fixed; top:20px; left:50%; transform:translateX(-50%); background:rgba(0,15,10,0.95); border:2px solid #00ff41; border-radius:8px; padding:20px; box-shadow:0 0 30px rgba(0,255,65,0.4); z-index:200000; text-align:center;">

    <h4 class="blink" style="margin:0 0 10px 0; color:#00ff41; font-family:'Orbitron';">üì° INCOMING VOICE COMMS</h4>

    <p id="call-caller-name" style="color:white; margin-bottom:15px; font-family:'Rajdhani'; font-size: 18px;">Agent Name</p>

    <div style="display:flex; justify-content:center; gap:15px;">

        <button class="btn primary" style="background:#00ff41; color:black; padding:10px 20px; margin:0;" onclick="window.acceptVoiceCall()">üìû ACCEPT</button>

        <button class="btn secondary" style="border-color:#ff0055; color:#ff0055; padding:10px 20px; margin:0;" onclick="window.rejectVoiceCall()">‚úñ DECLINE</button>

    </div>

</div>



<div id="active-call-ui" class="hidden" style="position:fixed; top:15px; left:50%; transform:translateX(-50%); background:rgba(0,0,0,0.9); border:1px solid #00ff41; padding:10px 20px; border-radius:20px; z-index:199999; display:flex; align-items:center; gap:15px; box-shadow:0 0 15px rgba(0,255,65,0.2);">

    <span class="blink" style="color:#00ff41; font-size: 12px; font-family: 'Orbitron';">üî¥ SECURE LINE ACTIVE</span>

    <span id="active-call-name" style="color: white; font-family: 'Rajdhani';">Agent</span>

    <button class="btn secondary" style="padding:5px 10px; margin:0; font-size:10px; border-color:#ff0055; color:#ff0055;" onclick="window.endVoiceCall()">END CALL</button>

    <audio id="remote-audio" autoplay></audio>

</div>



<div id="campaign-modal" class="modal hidden" style="z-index: 999999; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,2,5,0.95); backdrop-filter: blur(15px);">

    

    <div class="map-scanline"></div>



    <div class="campaign-master-container">



        <div id="map-tooltip" class="map-tooltip hidden">

            <div class="tt-header">

                <span id="tt-lvl" class="tt-lvl">LVL 1</span>

                <span id="tt-type" class="tt-type">NORMAL COMBAT</span>

            </div>

            <h3 id="tt-sector" class="tt-sector">OUTER RIM</h3>

            <div class="tt-divider"></div>

            <p id="tt-topic" class="tt-topic">MISSION: Addition & Subtraction</p>

            

            <div class="tt-stats-row">

                <div class="tt-stat">

                    <span class="tt-label">STATUS</span>

                    <span id="tt-status" class="tt-value">CLEARED</span>

                </div>

                <div class="tt-stat" style="text-align: right;">

                    <span class="tt-label">MASTERY</span>

                    <span id="tt-stars" class="tt-value">‚≠ê‚≠ê‚≠ê</span>

                </div>

            </div>

        </div>

        

        <div class="landscape-header">

            <div style="display: flex; align-items: center; gap: 20px;">

                <div class="pulse-ring-header"></div>

                <div>

                    <h1 class="map-title glitch-hover" data-text="N.E.X.U.S. STAR MAP">N.E.X.U.S. STAR MAP</h1>

                    <p class="map-subtitle">STRATEGIC SECTOR OVERVIEW // CIRCUIT PATHWAYS</p>

                </div>

            </div>

            

            <div class="map-progress-box">

                <div class="progress-labels">

                    <span style="letter-spacing: 2px;">GALAXY CONQUERED</span>

                    <span id="campaign-percentage" class="neon-gold">0%</span>

                </div>

                <div class="map-progress-track">

                    <div id="campaign-fill" class="map-progress-fill"></div>

                </div>

                <div style="text-align: right; font-size: 10px; color: #00e5ff; margin-top: 5px;">

                    ‚≠ê TOTAL STARS: <span id="total-stars-display">0</span>

                </div>

            </div>



            <button class="map-close-btn" onclick="window.closeCampaignMap()">

                <span style="font-size: 12px; opacity: 0.5; display:block; margin-bottom: -5px;">SYSTEM</span>

                DISCONNECT ‚úñ

            </button>

        </div>



        <div class="campaign-body-layout">

            

            <div id="map-viewport" class="circuit-viewport">

                <div id="map-scroll-area" class="circuit-scroll-area">

                    <div class="blueprint-grid"></div>

                    

                    <svg id="map-path-layer" class="map-layer"></svg>

                    

                    <div id="campaign-grid" class="map-layer"></div>

                </div>

            </div>



            <div class="milestone-sidebar">

                <h3 style="color: #ffd700; font-family: 'Orbitron'; text-align: center; border-bottom: 1px solid #333; padding-bottom: 10px; margin-top: 0;">REWARD CACHE</h3>

                

                <div class="reward-card next-supply">

                    <div class="reward-icon">üéÅ</div>

                    <div class="reward-info">

                        <h4>NEXT SUPPLY DROP</h4>

                        <p id="next-supply-text">Clear Level 5</p>

                    </div>

                </div>



                <div class="artifact-section">

                    <h4 style="color: #00e5ff; font-family: 'Rajdhani'; letter-spacing: 2px; text-align: center; margin: 20px 0 10px 0;">CLASSIFIED ARTIFACTS</h4>

                    

                    <div class="artifact-card locked" id="art-30">

                        <div class="art-img-box">?</div>

                        <div class="art-details">

                            <span class="art-lvl">LVL 30</span>

                            <span class="art-name">PHANTOM SHIP</span>

                        </div>

                    </div>

                    <div class="artifact-card locked" id="art-50">

                        <div class="art-img-box">?</div>

                        <div class="art-details">

                            <span class="art-lvl">LVL 50</span>

                            <span class="art-name">AEGIS CRUISER</span>

                        </div>

                    </div>

                    <div class="artifact-card locked" id="art-70">

                        <div class="art-img-box">?</div>

                        <div class="art-details">

                            <span class="art-lvl">LVL 70</span>

                            <span class="art-name">DARK MATTER DRIVE</span>

                        </div>

                    </div>

                    <div class="artifact-card locked" id="art-100">

                        <div class="art-img-box" style="border-color: #ff0055;">?</div>

                        <div class="art-details">

                            <span class="art-lvl" style="color: #ff0055;">LVL 100</span>

                            <span class="art-name" style="color: #ff0055;">GOD-CORE</span>

                        </div>

                    </div>

                </div>

            </div>



        </div>

    </div>

</div>



<div id="reward-modal" class="modal hidden" style="z-index: 1000000; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.95); backdrop-filter: blur(10px); display: flex; justify-content: center; align-items: center;">

    

    <div class="reward-sunburst"></div> <div class="reward-content">

        <h3 class="reward-subtitle">N.E.X.U.S. LOGISTICS</h3>

        <h1 id="reward-title" class="neon-gold" style="font-size: 40px; margin: 5px 0 20px 0; font-family: 'Orbitron'; letter-spacing: 5px;">SUPPLY SECURED</h1>

        

        <div id="reward-icon-container" class="reward-glow-box">

            <span id="reward-icon">üéÅ</span>

        </div>

        

        <h2 id="reward-name" style="color: white; font-family: 'Rajdhani'; font-size: 32px; margin-bottom: 5px;">+500 COINS</h2>

        <p id="reward-desc" style="color: #00e5ff; font-family: 'Courier New'; font-weight: bold; margin-top: 0;">Sector cleared bonus.</p>

        

        <button class="btn primary" style="margin-top: 30px; font-size: 18px; padding: 15px 40px;" onclick="window.closeRewardModal()">ACCEPT REWARD</button>

    </div>

</div>



<div id="comms-toggle-btn" class="cyber-orb-wrapper left-orb" onclick="window.toggleCommsSidebar()" style="display: none;">
    <div class="cyber-orb green-theme">
        <div class="orb-ring outer-ring"></div>
        <div class="orb-ring middle-ring"></div>
        <div class="orb-ring inner-ring"></div>
        <div class="orb-core">
            <span class="orb-icon blink">üì°</span>
        </div>
        <div id="comms-ping" class="hidden orb-alert-ping"></div>
    </div>
</div>

<div id="jessbot-toggle-btn" class="cyber-orb-wrapper right-orb" onclick="window.toggleNexusTerminal()" style="display: none;">
    <div class="cyber-orb gold-theme">
        <div class="orb-ring outer-ring"></div>
        <div class="orb-ring middle-ring"></div>
        <div class="orb-ring inner-ring"></div>
        <div class="orb-core">
            <span class="orb-icon">‚öôÔ∏è</span>
        </div>
    </div>
</div>











<div id="global-announcer" class="hidden">

    <div class="marquee"><span id="announcer-text">‚ö†Ô∏è SYSTEM ALERT: Connecting to Mainframe...</span></div>

</div>



<div id="cctv-modal" class="modal hidden" style="z-index: 200000; background: rgba(0, 5, 10, 0.95); backdrop-filter: blur(10px);">

    <div class="modal-content neon-border" style="width: 900px; max-width: 95vw; background: #000; border-color: #ff0055; box-shadow: 0 0 50px rgba(255,0,85,0.4); padding: 25px;">

        

        <div style="display:flex; justify-content:space-between; align-items:center; border-bottom:2px solid #ff0055; padding-bottom:15px; margin-bottom:20px;">

            <h2 style="color:#ff0055; margin:0; font-family:'Orbitron'; letter-spacing: 2px;">

                <span class="blink">üî¥</span> LIVE SURVEILLANCE: <span id="cctv-target-name" style="color:white;">AGENT</span>

            </h2>

            <button class="btn text-only" style="color:#fff; border:1px solid #555; padding: 10px 20px;" onclick="window.closeCCTV()">‚úñ TERMINATE LINK</button>

        </div>



        <div style="position:relative; width:100%; height:450px; background:#05070a; border:2px solid #334; border-radius:8px; overflow:hidden; display: flex; justify-content: center; align-items: center;">

            <div id="cctv-loading-text" class="blink" style="position: absolute; color: #00e5ff; font-family: 'Orbitron'; font-size: 20px;">INTERCEPTING SIGNAL...</div>

            <img id="live-cctv-screen" src="" style="width:100%; height:100%; object-fit:contain; position: relative; z-index: 2;">

            

            <div style="position:absolute; top:0; left:0; width:100%; height:100%; background:repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,229,255,0.05) 3px, rgba(0,229,255,0.05) 4px); pointer-events:none; z-index: 3;"></div>

            <div style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); width:60px; height:60px; border:2px dashed rgba(255,0,85,0.3); border-radius:50%; pointer-events:none; z-index: 3;"></div>

        </div>

        

    </div>

</div>



<style>

/* CSS para itago ang mga buttons kapag pipindutin na ang CTRL+P (Print) */

@media print {

    body * { visibility: hidden; }

    #printable-report, #printable-report * { visibility: visible; }

    #printable-report { position: absolute; left: 0; top: 0; width: 100%; box-shadow: none; }

    .no-print { display: none !important; }

}

</style>

    

    <div class="scanline-overlay"></div>

    <script type="module" src="script.js"></script>



</body>

</html>
